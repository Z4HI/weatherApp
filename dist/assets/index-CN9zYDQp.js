(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const g=document.querySelector("#searchbar"),a=document.querySelector(".loader"),h=document.querySelector(".submitBtn"),L=document.querySelector(".currentTemp"),l=document.querySelector(".currentLocation"),w=document.querySelector(".currentWeather"),q=document.querySelectorAll(".dayTemp"),T=document.querySelectorAll(".dayDate"),i=document.querySelectorAll(".dayCondition");document.querySelector(".currentImg");const S=document.querySelector(".currentLow"),u=document.querySelector(".currentHigh"),d=async t=>await(await fetch(`https://api.weatherapi.com/v1/current.json?key=e5cfec22297f416f83525002240704&q=${t}`)).json(),m=async t=>await(await fetch(`https://api.weatherapi.com/v1/forecast.json?key=e5cfec22297f416f83525002240704&q=${t}&days=7`)).json(),y=t=>{L.innerHTML=`Current Temperature : ${t.current.temp_f}`,l.innerHTML=`${t.location.name}, ${t.location.region}`,S.innerHTML="",u.innerHTML="";const e=document.createElement("img");e.classList.add("currentImg"),e.setAttribute("src",`${t.current.condition.icon}`),l.appendChild(e)},f=t=>{a.classList.toggle("loaded"),u.innerHTML=`Max Temperatre : ${t[0].day.maxtemp_f}`,t.splice(0,1);for(let e=0;e<i.length;e++){i[e].innerHTML="",q[e].innerHTML=t[e].day.avgtemp_f,i[e].innerHTML=t[e].day.condition.text,T[e].innerHTML=t[e].date;const r=document.createElement("img");r.setAttribute("src",`${t[e].day.condition.icon}`),i[e].appendChild(r)}},H=()=>{navigator.geolocation.getCurrentPosition(async t=>{const e=t.coords.latitude,r=t.coords.longitude,c=`${e},${r}`;try{const o=await d(c);y(o);const n=await m(c);console.log(n);const s=[];n.forecast.forecastday.forEach(p=>{s.push(p)}),f(s)}catch(o){console.log(o)}})};h.addEventListener("click",async()=>{console.log(w);const t=g.value;a.classList.toggle("loaded");try{const e=await d(t),r=await m(t);y(e);const c=[];r.forecast.forecastday.forEach(o=>{c.push(o)}),f(c),console.log(c)}catch(e){console.log(e)}});window.addEventListener("load",async()=>{a.classList.toggle("loaded"),H()});
