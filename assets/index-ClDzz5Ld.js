(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const L=document.querySelector("#searchbar"),u=document.querySelector(".loader"),q=document.querySelector(".submitBtn"),T=document.querySelector(".currentTemp"),i=document.querySelector(".currentLocation");document.querySelector(".currentWeather");const S=document.querySelectorAll(".dayTemp"),H=document.querySelectorAll(".dayDate"),a=document.querySelectorAll(".dayCondition"),$=document.querySelector(".currentLow"),d=document.querySelector(".currentHigh"),b="qoNrWoXnI6lZcFl1CwkOjGjsdC929X0kB5TXvx7HBefR1GPIfp37OiKo",l=async t=>(await(await fetch(`https://api.pexels.com/v1/search?query=${t}&page=1&per_page=1`,{headers:{Authorization:b}})).json()).photos[0].src.landscape,p=t=>{document.querySelector("#app").style.backgroundImage=`url('${t}')`},m=async t=>await(await fetch(`https://api.weatherapi.com/v1/current.json?key=e5cfec22297f416f83525002240704&q=${t}`)).json(),y=async t=>await(await fetch(`https://api.weatherapi.com/v1/forecast.json?key=e5cfec22297f416f83525002240704&q=${t}&days=7`)).json(),f=t=>{T.innerHTML=`Current Temperature : ${t.current.temp_f}`,i.innerHTML=`${t.location.name}, ${t.location.region}`,$.innerHTML="",d.innerHTML="";const e=document.createElement("img");e.classList.add("currentImg"),e.setAttribute("src",`${t.current.condition.icon}`),i.appendChild(e)},g=t=>{u.classList.toggle("loaded"),d.innerHTML=`Max Temperatre : ${t[0].day.maxtemp_f}`,t.splice(0,1);for(let e=0;e<a.length;e++){a[e].innerHTML="",S[e].innerHTML=t[e].day.avgtemp_f,a[e].innerHTML=t[e].day.condition.text,H[e].innerHTML=t[e].date;const r=document.createElement("img");r.setAttribute("src",`${t[e].day.condition.icon}`),a[e].appendChild(r)}},v=()=>{navigator.geolocation.getCurrentPosition(async t=>{const e=t.coords.latitude,r=t.coords.longitude,c=`${e},${r}`;try{const o=await m(c);f(o);const n=await y(c),s=[];n.forecast.forecastday.forEach(w=>{s.push(w)}),g(s)}catch(o){console.log(o)}})},h=()=>{u.classList.toggle("loaded")};q.addEventListener("click",async()=>{h();const t=L.value;try{const e=await l(t);p(e);const r=await m(t),c=await y(t);f(r);const o=[];c.forecast.forecastday.forEach(n=>{o.push(n)}),g(o)}catch(e){console.log(e)}});window.addEventListener("load",async()=>{h();const t=v(),e=await l(t);p(e)});
